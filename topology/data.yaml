nodes:
  - name: n1
    role: host
    ipv4_address: 198.51.100.3
    ipv4_mask: /24
    interfaces:
      - { name: eth1, ipv4_address: "198.51.100.2", ipv4_mask: /24 }
    gateway_ip: 198.51.100.1

  - name: n2
    role: host
    ipv4_address: 192.0.0.3
    ipv4_mask: /24
    interfaces:
      - { name: eth1, ipv4_address: "192.0.0.1", ipv4_mask: /24 }
    gateway_ip: 192.0.0.2

  - name: ce1
    role: ce
    bgp: { asn: 65001, router_id: 10.0.0.1 }
    interfaces:
      - { name: eth3, ipv4_address: "198.51.100.1", ipv4_mask: /24 }
      - { name: eth1, ipv4_address: "10.1.11.1", ipv4_mask: /30 } 
      - { name: eth2, ipv4_address: "10.1.12.2", ipv4_mask: /30 }   

  - name: ce2
    role: ce
    bgp: { asn: 65002, router_id: 10.0.0.2 }
    interfaces:
      - { name: eth3, ipv4_address: "192.0.0.2", ipv4_mask: /24 }  
      - { name: eth1, ipv4_address: "10.2.0.1", ipv4_mask: /30 }   
      - { name: eth2, ipv4_address: "10.2.11.6", ipv4_mask: /30 }  

  - name: pe1
    role: pe
    ipv4_address: 10.0.0.11
    ipv4_mask: /32
    bgp: { asn: 65020, router_id: 10.0.0.11 }
    interfaces:
      - { name: eth1, ipv4_address: "10.1.11.2", ipv4_mask: /30 }   
      - { name: eth3, ipv4_address: "10.2.0.2", ipv4_mask: /30 }   
      - { name: eth4, ipv4_address: "192.168.12.1", ipv4_mask: /24 }

  - name: pe2
    role: pe
    ipv4_address: 10.0.0.12
    ipv4_mask: /32
    bgp: { asn: 65020, router_id: 10.0.0.12 }
    interfaces:
      - { name: eth1, ipv4_address: "10.1.12.1", ipv4_mask: /30 }   
      - { name: eth3, ipv4_address: "10.2.11.5", ipv4_mask: /30 }   
      - { name: eth4, ipv4_address: "192.168.12.3", ipv4_mask: /24 }

  - name: gw1
    role: gw
    ipv4_address: 192.168.0.11
    ipv4_mask: /32
    bgp:
      asn: 65020
      router_id: 10.0.0.21
    interfaces:

      - { name: eth3, ipv4_address: "192.168.12.2", ipv4_mask: /24 }

      - { name: eth2, ipv4_address: "172.30.1.1", ipv4_mask: /30 }

  - name: gw2
    role: gw
    ipv4_address: 10.3.0.1
    bgp:
      asn: 65020
      router_id: 10.0.0.22
    interfaces:

      - { name: eth3, ipv4_address: "192.168.12.4", ipv4_mask: /24 }

      - { name: eth2, ipv4_address: "172.30.2.1", ipv4_mask: /30 }


  - name: up1
    role: up
    ipv4_address: 203.0.99.1
    ipv4_mask: /32
    bgp:
      asn: 65100
      router_id: 10.0.0.31
    interfaces:
      - { name: eth1, ipv4_address: "172.30.1.2", ipv4_mask: /30 }
      - { name: eth2, ipv4_address: "10.4.1.1", ipv4_mask: /30 }
      - { name: eth3, ipv4_address: "10.3.1.1", ipv4_mask: /30 }
      - { name: eth4, ipv4_address: "10.2.1.1", ipv4_mask: /30 }

  - name: up2
    role: up
    ipv4_address: 10.3.1.11
    bgp:
      asn: 65200
      router_id: 10.0.0.32
    interfaces:
      - { name: eth1, ipv4_address: "172.30.2.2", ipv4_mask: /30 }
      - { name: eth2, ipv4_address: "10.4.2.1", ipv4_mask: /30 }
      - { name: eth3, ipv4_address: "10.3.2.1", ipv4_mask: /30 }
      - { name: eth4, ipv4_address: "10.2.2.1", ipv4_mask: /30 }

  - name: r1
    role: router
    bgp:
      asn: 65500
      router_id: 8.8.8.8
    ipv4_address: 8.8.8.8
    interfaces:
      - { name: eth1, ipv4_address: "10.4.1.2", ipv4_mask: /30 }
      - { name: eth2, ipv4_address: "10.4.2.2", ipv4_mask: /30 }
      - { name: lo, ipv4_address: "8.8.8.8", ipv4_mask: /32 }

  - name: r2
    role: router
    bgp:
      asn: 65501
      router_id: 7.7.7.7
    ipv4_address: 7.7.7.7
    interfaces:
      - { name: eth1, ipv4_address: "10.3.1.2", ipv4_mask: /30 }
      - { name: eth2, ipv4_address: "10.3.2.2", ipv4_mask: /30 }
      - { name: lo, ipv4_address: "7.7.7.7", ipv4_mask: /32 }

  - name: r3
    role: router
    bgp:
      asn: 65502
      router_id: 6.6.6.6
    ipv4_address: 6.6.6.6
    interfaces:
      - { name: eth1, ipv4_address: "10.2.1.2", ipv4_mask: /30 }
      - { name: eth2, ipv4_address: "10.2.2.2", ipv4_mask: /30 }
      - { name: lo, ipv4_address: "6.6.6.6", ipv4_mask: /32 }

  - name: manager
    role: host
    bgp: 
      asn: 65020
      router_id: 192.168.12.24
    interfaces:
      - { name: lo, ipv4_address: "192.168.12.24", ipv4_mask: /32}
      - { name: eth1, ipv4_address: "192.168.12.5", ipv4_mask: /24}
    gateway_ip: 192.168.12.1

  - name: lan
    role: bridge
    kind: bridge

links:
  - { a: "n1", a_port: "eth1", b: "ce1", b_port: "eth3" }
  - { a: "n2", a_port: "eth1", b: "ce2", b_port: "eth3" }

  - { a: "ce1", a_port: "eth1", b: "pe1", b_port: "eth1" }
  - { a: "ce1", a_port: "eth2", b: "pe2", b_port: "eth1" }
  - { a: "ce2", a_port: "eth1", b: "pe1", b_port: "eth3" }
  - { a: "ce2", a_port: "eth2", b: "pe2", b_port: "eth3" }

  - { a: "pe1", a_port: "eth4", b: "lan", b_port: "eth1" }
  - { a: "pe2", a_port: "eth4", b: "lan", b_port: "eth2" }
  - { a: "gw1", a_port: "eth3", b: "lan", b_port: "eth3" }
  - { a: "gw2", a_port: "eth3", b: "lan", b_port: "eth4" }

  - { a: "gw1", a_port: "eth2", b: "up1", b_port: "eth1", capacity: 1000 }
  - { a: "gw2", a_port: "eth2", b: "up2", b_port: "eth1", capacity: 1000 }

  - { a: "up1", a_port: "eth2", b: "r1", b_port: "eth1" }
  - { a: "up2", a_port: "eth2", b: "r1", b_port: "eth2" }

  - { a: "up1", a_port: "eth3", b: "r2", b_port: "eth1" }
  - { a: "up2", a_port: "eth3", b: "r2", b_port: "eth2" }

  - { a: "up1", a_port: "eth4", b: "r3", b_port: "eth1" }
  - { a: "up2", a_port: "eth4", b: "r3", b_port: "eth2" }

  - { a: "manager", a_port: "eth1", b: "lan", b_port: "eth5"}