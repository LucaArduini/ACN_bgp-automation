name: project

topology:
    nodes:
      {% for node in nodes %}
      {{ node.name }}:
        {% if node.kind %}
        kind: {{ node.kind }}
        {% else %}
        kind: linux
        {% endif %}
        {% if node.kind != 'bridge' %}
        image: quay.io/frrouting/frr:10.4.1
        mgmt-ipv4: {{ node.mgmt_ip }}
        startup-config: configs/{{ node.name }}.conf
        {% endif %}
      {% endfor %}

    links:
      {% for link in links %}
          - endpoints: ["{{ link.a }}:{{ link.a_port }}", "{{ link.b }}:{{ link.b_port }}"]
      {% endfor %}